{"version":3,"sources":["discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js"],"sourcesContent":["define(\"discourse/plugins/discourse-lazy-videos/components/lazy-video-test\", [\"@ember/test-helpers\", \"qunit\", \"discourse/tests/helpers/component-test\", \"@ember/template-factory\"], function (_testHelpers, _qunit, _componentTest, _templateFactory) {\n  \"use strict\";\n\n  (0, _qunit.module)(\"Discourse Lazy Videos | Component | lazy-video\", function (hooks) {\n    (0, _componentTest.setupRenderingTest)(hooks);\n    this.attributes = {\n      url: \"https://www.youtube.com/watch?v=kPRA0W1kECg\",\n      thumbnail: \"thumbnail.jpeg\",\n      title: \"15 Sorting Algorithms in 6 Minutes\",\n      providerName: \"youtube\",\n      id: \"kPRA0W1kECg\",\n      dominantColor: \"00ffff\",\n      startTime: 234\n    };\n    (0, _qunit.test)(\"displays the correct video title\", async function (assert) {\n      await (0, _testHelpers.render)((0, _templateFactory.createTemplateFactory)(\n      /*\n        <LazyVideo @videoAttributes={{this.attributes}} />\n      */\n      {\n        \"id\": \"B8tqv5h1\",\n        \"block\": \"[[[8,[39,0],null,[[\\\"@videoAttributes\\\"],[[30,0,[\\\"attributes\\\"]]]],null]],[],false,[\\\"lazy-video\\\"]]\",\n        \"moduleName\": \"/Users/laylaelwakhi/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js\",\n        \"isStrictMode\": false\n      }));\n      assert.dom(\".title-link\").hasText(this.attributes.title);\n    });\n    (0, _qunit.test)(\"uses the correct video start time\", async function (assert) {\n      await (0, _testHelpers.render)((0, _templateFactory.createTemplateFactory)(\n      /*\n        <LazyVideo @videoAttributes={{this.attributes}} />\n      */\n      {\n        \"id\": \"B8tqv5h1\",\n        \"block\": \"[[[8,[39,0],null,[[\\\"@videoAttributes\\\"],[[30,0,[\\\"attributes\\\"]]]],null]],[],false,[\\\"lazy-video\\\"]]\",\n        \"moduleName\": \"/Users/laylaelwakhi/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js\",\n        \"isStrictMode\": false\n      }));\n      assert.dom(\".youtube-onebox\").hasAttribute(\"data-video-start-time\", \"234\");\n    });\n    (0, _qunit.test)(\"displays the correct provider icon\", async function (assert) {\n      await (0, _testHelpers.render)((0, _templateFactory.createTemplateFactory)(\n      /*\n        <LazyVideo @videoAttributes={{this.attributes}} />\n      */\n      {\n        \"id\": \"B8tqv5h1\",\n        \"block\": \"[[[8,[39,0],null,[[\\\"@videoAttributes\\\"],[[30,0,[\\\"attributes\\\"]]]],null]],[],false,[\\\"lazy-video\\\"]]\",\n        \"moduleName\": \"/Users/laylaelwakhi/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js\",\n        \"isStrictMode\": false\n      }));\n      assert.dom(\".icon.youtube-icon\").exists();\n    });\n    (0, _qunit.test)(\"uses tthe dominant color from the dom\", async function (assert) {\n      await (0, _testHelpers.render)((0, _templateFactory.createTemplateFactory)(\n      /*\n        <LazyVideo @videoAttributes={{this.attributes}} />\n      */\n      {\n        \"id\": \"B8tqv5h1\",\n        \"block\": \"[[[8,[39,0],null,[[\\\"@videoAttributes\\\"],[[30,0,[\\\"attributes\\\"]]]],null]],[],false,[\\\"lazy-video\\\"]]\",\n        \"moduleName\": \"/Users/laylaelwakhi/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js\",\n        \"isStrictMode\": false\n      }));\n      assert.dom(\".video-thumbnail\").hasAttribute(\"style\", \"background-color: #00ffff;\");\n    });\n    (0, _qunit.test)(\"loads the iframe when clicked\", async function (assert) {\n      await (0, _testHelpers.render)((0, _templateFactory.createTemplateFactory)(\n      /*\n        <LazyVideo @videoAttributes={{this.attributes}}/>\n      */\n      {\n        \"id\": \"B8tqv5h1\",\n        \"block\": \"[[[8,[39,0],null,[[\\\"@videoAttributes\\\"],[[30,0,[\\\"attributes\\\"]]]],null]],[],false,[\\\"lazy-video\\\"]]\",\n        \"moduleName\": \"/Users/laylaelwakhi/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js\",\n        \"isStrictMode\": false\n      }));\n      assert.dom(\".lazy-video-container.video-loaded\").doesNotExist();\n      await (0, _testHelpers.click)(\".video-thumbnail.youtube\");\n      assert.dom(\".lazy-video-container.video-loaded iframe\").exists();\n    });\n    (0, _qunit.test)(\"accepts an optional onLoadedVideo callback function\", async function (assert) {\n      this.set(\"foo\", 1);\n      this.set(\"onLoadedVideo\", () => this.set(\"foo\", 2));\n      await (0, _testHelpers.render)((0, _templateFactory.createTemplateFactory)(\n      /*\n        <LazyVideo @videoAttributes={{this.attributes}} @onLoadedVideo={{this.onLoadedVideo}} />\n      */\n      {\n        \"id\": \"oJScdikz\",\n        \"block\": \"[[[8,[39,0],null,[[\\\"@videoAttributes\\\",\\\"@onLoadedVideo\\\"],[[30,0,[\\\"attributes\\\"]],[30,0,[\\\"onLoadedVideo\\\"]]]],null]],[],false,[\\\"lazy-video\\\"]]\",\n        \"moduleName\": \"/Users/laylaelwakhi/discourse/app/assets/javascripts/discourse/discourse/plugins/discourse-lazy-videos/components/lazy-video-test.js\",\n        \"isStrictMode\": false\n      }));\n      assert.strictEqual(this.foo, 1);\n      await (0, _testHelpers.click)(\".video-thumbnail.youtube\");\n      assert.strictEqual(this.foo, 2);\n    });\n  });\n});"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;","file":"discourse-lazy-videos_tests.js"}