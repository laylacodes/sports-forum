{"version":3,"sources":["discourse/plugins/footnote/acceptance/footnote-test.js"],"sourcesContent":["define(\"discourse/plugins/footnote/acceptance/footnote-test\", [\"@ember/test-helpers\", \"qunit\", \"discourse/tests/fixtures/topic\", \"discourse/tests/helpers/qunit-helpers\", \"discourse-common/lib/object\"], function (_testHelpers, _qunit, _topic, _qunitHelpers, _object) {\n  \"use strict\";\n\n  (0, _qunitHelpers.acceptance)(\"Discourse Foonote Plugin\", function (needs) {\n    needs.user();\n    needs.settings({\n      display_footnotes_inline: true\n    });\n    needs.pretender((server, helper) => {\n      server.get(\"/t/45.json\", () => {\n        let topic = (0, _object.cloneJSON)(_topic.default[\"/t/28830/1.json\"]);\n        topic[\"post_stream\"][\"posts\"][0][\"cooked\"] = `\n        <p>Lorem ipsum dolor sit amet<sup class=\"footnote-ref\"><a href=\"#footnote-17-1\" id=\"footnote-ref-17-1\">[1]</a></sup></p>\n        <p class=\"second\">Second reference should also work. <sup class=\"footnote-ref\"><a href=\"#footnote-17-1\" id=\"footnote-ref-17-0\">[1]</a></sup></p>\n        <hr class=\"footnotes-sep\">\n        <ol class=\"footnotes-list\">\n          <li id=\"footnote-17-1\" class=\"footnote-item\">\n          <p>consectetur adipiscing elit <a href=\"#footnote-ref-17-1\" class=\"footnote-backref\">↩︎</a></p>\n          </li>\n        </ol>\n      `;\n        return helper.response(topic);\n      });\n    });\n    (0, _qunit.test)(\"displays the foonote on click\", async function (assert) {\n      await (0, _testHelpers.visit)(\"/t/45\");\n      const tooltip = document.getElementById(\"footnote-tooltip\");\n      assert.ok((0, _qunitHelpers.exists)(tooltip));\n      await (0, _testHelpers.click)(\".expand-footnote\");\n      assert.equal(tooltip.querySelector(\".footnote-tooltip-content\").textContent.trim(), \"consectetur adipiscing elit ↩︎\");\n    });\n    (0, _qunit.test)(\"clicking a second footnote with same name works\", async function (assert) {\n      await (0, _testHelpers.visit)(\"/t/45\");\n      const tooltip = document.getElementById(\"footnote-tooltip\");\n      assert.ok((0, _qunitHelpers.exists)(tooltip));\n      await (0, _testHelpers.click)(\".second .expand-footnote\");\n      assert.equal(tooltip.querySelector(\".footnote-tooltip-content\").textContent.trim(), \"consectetur adipiscing elit ↩︎\");\n    });\n  });\n});"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;","file":"footnote_tests.js"}